import{r as I,o as _,c as g,d as f,e as o,w as a,x as F,z as P,C as T,D as $,F as q,q as m,i as J,G as M,E as i,H as O,I as A,v as G,y as H,n as R}from"./index-0b508a82.js";/* empty css                   *//* empty css                    *//* empty css              *//* empty css                 *//* empty css               *//* empty css               *//* empty css                *//* empty css                     */import{r as c}from"./request-617fd929.js";const j={class:"card",style:{"margin-bottom":"5px"}},K={class:"card",style:{"margin-bottom":"5px"}},L={style:{"margin-bottom":"10px"}},Q={key:0},W={class:"card"},X={class:"dialog-footer"},pe={__name:"User",setup(Y){const b="http://:9090/files/upload",e=I({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null}),d=()=>{c.get("/user/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(n=>{var l,r;e.tableData=(l=n.data)==null?void 0:l.list,e.total=(r=n.data)==null?void 0:r.total})},V=()=>{e.form={},e.formVisible=!0},y=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},x=()=>{c.post("/user/add",e.form).then(n=>{n.code==="200"?(d(),i.success("操作成功"),e.formVisible=!1):i.error(n.msg)})},E=()=>{c.put("/user/update",e.form).then(n=>{n.code==="200"?(d(),i.success("操作成功"),e.formVisible=!1):i.error(n.msg)})},h=()=>{e.form.id?E():x()},v=n=>{M.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(l=>{c.delete("/user/delete/"+n).then(r=>{r.code==="200"?(d(),i.success("操作成功")):i.error(r.msg)})}).catch(l=>{})},k=()=>{e.name=null,d()},C=n=>{e.form.avatar=n.data};return d(),(n,l)=>{const r=F,s=P,p=O,w=A,U=T,N=$,S=G,u=H,z=R,D=q;return _(),g("div",null,[f("div",j,[o(r,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.name=t),style:{width:"300px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),o(s,{type:"primary",onClick:d},{default:a(()=>[m("查询")]),_:1}),o(s,{type:"info",style:{margin:"0 10px"},onClick:k},{default:a(()=>[m("重置")]),_:1})]),f("div",K,[f("div",L,[o(s,{type:"primary",onClick:V},{default:a(()=>[m("新增")]),_:1})]),o(U,{data:e.tableData,stripe:""},{default:a(()=>[o(p,{label:"用户名",prop:"username"}),o(p,{label:"名称",prop:"name"}),o(p,{label:"头像"},{default:a(t=>[o(w,{src:t.row.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),_:1}),o(p,{label:"角色",prop:"role"},{default:a(t=>[t.row.role==="USER"?(_(),g("span",Q,"普通用户")):J("",!0)]),_:1}),o(p,{label:"电话",prop:"phone"}),o(p,{label:"邮箱",prop:"email"}),o(p,{label:"操作",align:"center",width:"160"},{default:a(t=>[o(s,{type:"primary",onClick:B=>y(t.row)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),o(s,{type:"danger",onClick:B=>v(t.row.id)},{default:a(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),f("div",W,[o(N,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":l[1]||(l[1]=t=>e.pageSize=t),"current-page":e.pageNum,"onUpdate:currentPage":l[2]||(l[2]=t=>e.pageNum=t),total:e.total},null,8,["page-size","current-page","total"])]),o(D,{title:"信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":l[8]||(l[8]=t=>e.formVisible=t),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[f("span",X,[o(s,{onClick:l[7]||(l[7]=t=>e.formVisible=!1)},{default:a(()=>[m("取 消")]),_:1}),o(s,{type:"primary",onClick:h},{default:a(()=>[m("保 存")]),_:1})])]),default:a(()=>[o(z,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[o(u,{label:"头像",prop:"avatar"},{default:a(()=>[o(S,{action:b,"list-type":"picture","on-success":C},{default:a(()=>[o(s,{type:"primary"},{default:a(()=>[m("上传图片")]),_:1})]),_:1})]),_:1}),o(u,{label:"账号",prop:"username"},{default:a(()=>[o(r,{modelValue:e.form.username,"onUpdate:modelValue":l[3]||(l[3]=t=>e.form.username=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(u,{label:"名称",prop:"name"},{default:a(()=>[o(r,{modelValue:e.form.name,"onUpdate:modelValue":l[4]||(l[4]=t=>e.form.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(u,{label:"电话",prop:"phone"},{default:a(()=>[o(r,{modelValue:e.form.phone,"onUpdate:modelValue":l[5]||(l[5]=t=>e.form.phone=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(u,{label:"邮箱",prop:"email"},{default:a(()=>[o(r,{modelValue:e.form.email,"onUpdate:modelValue":l[6]||(l[6]=t=>e.form.email=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{pe as default};
