import{r as H,b as K,o as _,c as y,d as i,e,w as t,i as x,z as Q,J as W,C as X,D as Y,F as Z,q as n,t as m,h as ee,K as U,L as R,G as le,E as b,x as te,M as oe,N as ae,O as ie,I as se,H as ne,k as de,v as re,y as pe,n as ue,P as me,Q as ce}from"./index-0b508a82.js";/* empty css               *//* empty css                   *//* empty css                    *//* empty css              *//* empty css                 *//* empty css             *//* empty css               *//* empty css                *//* empty css                     *//* empty css            */import{r as w}from"./request-617fd929.js";const fe={class:"card",style:{"margin-bottom":"5px"}},_e={class:"card",style:{"margin-bottom":"5px"}},ge={key:0,style:{"margin-bottom":"10px"}},ye={class:"card"},be={style:{display:"flex","align-items":"center",gap:"20px"}},Ve={key:0,style:{"flex-shrink":"0",position:"relative"}},he={style:{flex:"1"}},ve=i("div",{style:{"margin-top":"10px",color:"#999","font-size":"12px"}}," 支持 JPG、PNG 格式，文件大小不超过 2MB ",-1),xe={class:"dialog-footer"},we={key:0,style:{padding:"20px"}},ke={style:{"margin-top":"0"}},Ee={style:{color:"#666","line-height":"1.6"}},Ce={style:{"text-align":"center"}},Ue={style:{"font-size":"24px",color:"#409EFF","font-weight":"bold"}},Re=i("div",{style:{color:"#999"}},"分钟",-1),ze={style:{"text-align":"center"}},Ne={style:{"font-size":"24px",color:"#67C23A","font-weight":"bold"}},Se=i("div",{style:{color:"#999"}},"卡路里",-1),De={style:{"text-align":"center"}},Ie={style:{"font-size":"24px",color:"#E6A23C","font-weight":"bold"}},Fe=i("div",{style:{color:"#999"}},"蛋白质(g)",-1),Te={style:{"text-align":"center"}},Pe={style:{"font-size":"24px",color:"#F56C6C","font-weight":"bold"}},Be=i("div",{style:{color:"#999"}},"难度",-1),Je=i("h3",null,"食材清单",-1),Oe={style:{background:"#f8f9fa",padding:"15px","border-radius":"6px"}},Me={style:{"margin-left":"10px"}},Ae=i("h3",null,"烹饪步骤",-1),Ge={style:{background:"#f8f9fa",padding:"15px","border-radius":"6px"}},qe={style:{display:"flex","align-items":"flex-start"}},Le={style:{background:"#409EFF",color:"white",width:"24px",height:"24px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","margin-right":"10px","flex-shrink":"0"}},$e={style:{"line-height":"1.6"}},je={class:"dialog-footer"},sl={__name:"Recipe",setup(He){const z="http://:9090/files/upload",l=H({pageNum:1,pageSize:10,total:0,formVisible:!1,detailVisible:!1,currentRecipe:null,form:{},tableData:[],name:null,category:null,difficulty:null,userRole:JSON.parse(localStorage.getItem("system-user")||"{}").role||"USER"}),V=()=>{const d={pageNum:l.pageNum,pageSize:l.pageSize,name:l.name,category:l.category,difficulty:l.difficulty};w.get("/recipe/selectPage",{params:d}).then(a=>{var p,s;l.tableData=((p=a.data)==null?void 0:p.list)||[],l.total=((s=a.data)==null?void 0:s.total)||0})},N=()=>{l.form={},l.formVisible=!0},S=d=>{l.currentRecipe=JSON.parse(JSON.stringify(d)),l.detailVisible=!0},D=(d,a)=>{a&&a.stopPropagation(),l.form=JSON.parse(JSON.stringify(d)),l.formVisible=!0},I=()=>{w.post("/recipe/add",l.form).then(d=>{d.code==="200"?(V(),b.success("操作成功"),l.formVisible=!1):b.error(d.msg)})},F=()=>{w.put("/recipe/update",l.form).then(d=>{d.code==="200"?(V(),b.success("操作成功"),l.formVisible=!1):b.error(d.msg)})},T=()=>{l.form.id?F():I()},P=(d,a)=>{a&&a.stopPropagation(),le.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(p=>{w.delete("/recipe/delete/"+d).then(s=>{s.code==="200"?(V(),b.success("操作成功")):b.error(s.msg)})}).catch(p=>{})},B=()=>{l.form.image=null},J=()=>{l.name=null,l.category=null,l.difficulty=null,V()},O=d=>{l.form.image=d.data,b.success("上传成功")};return V(),(d,a)=>{const p=te,s=oe,r=ae,v=ie,c=Q,h=W,k=se,g=ne,M=X,A=Y,G=K("Close"),q=de,L=re,u=pe,$=ue,C=Z,E=me,j=ce;return _(),y("div",null,[i("div",fe,[e(h,{gutter:20},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(p,{modelValue:l.name,"onUpdate:modelValue":a[0]||(a[0]=o=>l.name=o),style:{width:"100%"},placeholder:"请输入食谱名称查询"},null,8,["modelValue"])]),_:1}),e(s,{span:4},{default:t(()=>[e(v,{modelValue:l.category,"onUpdate:modelValue":a[1]||(a[1]=o=>l.category=o),style:{width:"100%"},placeholder:"分类",clearable:""},{default:t(()=>[e(r,{label:"家常菜",value:"家常菜"}),e(r,{label:"健康餐",value:"健康餐"}),e(r,{label:"减脂餐",value:"减脂餐"}),e(r,{label:"素菜",value:"素菜"}),e(r,{label:"荤菜",value:"荤菜"})]),_:1},8,["modelValue"])]),_:1}),e(s,{span:4},{default:t(()=>[e(v,{modelValue:l.difficulty,"onUpdate:modelValue":a[2]||(a[2]=o=>l.difficulty=o),style:{width:"100%"},placeholder:"难度",clearable:""},{default:t(()=>[e(r,{label:"简单",value:"简单"}),e(r,{label:"中等",value:"中等"}),e(r,{label:"困难",value:"困难"})]),_:1},8,["modelValue"])]),_:1}),e(s,{span:4},{default:t(()=>[e(c,{type:"primary",onClick:V},{default:t(()=>[n("查询")]),_:1}),e(c,{type:"info",style:{"margin-left":"10px"},onClick:J},{default:t(()=>[n("重置")]),_:1})]),_:1})]),_:1})]),i("div",_e,[l.userRole==="ADMIN"?(_(),y("div",ge,[e(c,{type:"primary",onClick:N},{default:t(()=>[n("新增食谱")]),_:1})])):x("",!0),e(M,{data:l.tableData,stripe:"",onRowClick:S},{default:t(()=>[e(g,{label:"食谱图片",width:"100"},{default:t(o=>[e(k,{src:o.row.image,style:{width:"60px",height:"60px","border-radius":"6px"}},null,8,["src"])]),_:1}),e(g,{label:"食谱名称",prop:"name",width:"200"}),e(g,{label:"描述",prop:"description","show-overflow-tooltip":""}),e(g,{label:"分类",prop:"category",width:"100"}),e(g,{label:"难度",prop:"difficulty",width:"80"}),e(g,{label:"烹饪时间",width:"100"},{default:t(o=>[n(m(o.row.cookingTime)+"分钟 ",1)]),_:1}),e(g,{label:"热量",width:"80"},{default:t(o=>[n(m(o.row.calories)+"卡 ",1)]),_:1}),l.userRole==="ADMIN"?(_(),ee(g,{key:0,label:"操作",align:"center",width:"150"},{default:t(o=>[e(c,{type:"warning",size:"small",onClick:f=>D(o.row,f)},{default:t(()=>[n("编辑")]),_:2},1032,["onClick"]),e(c,{type:"danger",size:"small",onClick:f=>P(o.row.id,f)},{default:t(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})):x("",!0)]),_:1},8,["data"])]),i("div",ye,[e(A,{background:"",layout:"prev, pager, next","page-size":l.pageSize,"onUpdate:pageSize":a[3]||(a[3]=o=>l.pageSize=o),"current-page":l.pageNum,"onUpdate:currentPage":a[4]||(a[4]=o=>l.pageNum=o),total:l.total},null,8,["page-size","current-page","total"])]),e(C,{title:l.form.id?"编辑食谱":"新增食谱",width:"50%",modelValue:l.formVisible,"onUpdate:modelValue":a[17]||(a[17]=o=>l.formVisible=o),"close-on-click-modal":!1,"destroy-on-close":""},{footer:t(()=>[i("span",xe,[e(c,{onClick:a[16]||(a[16]=o=>l.formVisible=!1)},{default:t(()=>[n("取 消")]),_:1}),e(c,{type:"primary",onClick:T},{default:t(()=>[n("保 存")]),_:1})])]),default:t(()=>[e($,{model:l.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:t(()=>[e(u,{label:"食谱图片",prop:"image"},{default:t(()=>[i("div",be,[l.form.image?(_(),y("div",Ve,[e(k,{src:l.form.image,style:{width:"120px",height:"120px","border-radius":"8px",border:"1px solid #eee"}},null,8,["src"]),e(c,{type:"danger",size:"small",circle:"",style:{position:"absolute",top:"-8px",right:"-8px",padding:"4px"},onClick:B},{default:t(()=>[e(q,null,{default:t(()=>[e(G)]),_:1})]),_:1})])):x("",!0),i("div",he,[e(L,{action:z,"list-type":"picture","on-success":O,"show-file-list":!1},{default:t(()=>[e(c,{type:"primary"},{default:t(()=>[n("上传图片")]),_:1})]),_:1}),ve])])]),_:1}),e(u,{label:"食谱名称",prop:"name"},{default:t(()=>[e(p,{modelValue:l.form.name,"onUpdate:modelValue":a[5]||(a[5]=o=>l.form.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"描述",prop:"description"},{default:t(()=>[e(p,{type:"textarea",modelValue:l.form.description,"onUpdate:modelValue":a[6]||(a[6]=o=>l.form.description=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(h,null,{default:t(()=>[e(s,{span:12},{default:t(()=>[e(u,{label:"分类",prop:"category"},{default:t(()=>[e(v,{modelValue:l.form.category,"onUpdate:modelValue":a[7]||(a[7]=o=>l.form.category=o),style:{width:"100%"}},{default:t(()=>[e(r,{label:"家常菜",value:"家常菜"}),e(r,{label:"健康餐",value:"健康餐"}),e(r,{label:"减脂餐",value:"减脂餐"}),e(r,{label:"素菜",value:"素菜"}),e(r,{label:"荤菜",value:"荤菜"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:t(()=>[e(u,{label:"难度",prop:"difficulty"},{default:t(()=>[e(v,{modelValue:l.form.difficulty,"onUpdate:modelValue":a[8]||(a[8]=o=>l.form.difficulty=o),style:{width:"100%"}},{default:t(()=>[e(r,{label:"简单",value:"简单"}),e(r,{label:"中等",value:"中等"}),e(r,{label:"困难",value:"困难"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(s,{span:12},{default:t(()=>[e(u,{label:"烹饪时间",prop:"cookingTime"},{default:t(()=>[e(p,{modelValue:l.form.cookingTime,"onUpdate:modelValue":a[9]||(a[9]=o=>l.form.cookingTime=o),type:"number"},{append:t(()=>[n("分钟")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:t(()=>[e(u,{label:"热量",prop:"calories"},{default:t(()=>[e(p,{modelValue:l.form.calories,"onUpdate:modelValue":a[10]||(a[10]=o=>l.form.calories=o),type:"number"},{append:t(()=>[n("卡路里")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(s,{span:8},{default:t(()=>[e(u,{label:"蛋白质",prop:"protein"},{default:t(()=>[e(p,{modelValue:l.form.protein,"onUpdate:modelValue":a[11]||(a[11]=o=>l.form.protein=o),type:"number"},{append:t(()=>[n("g")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"碳水化合物",prop:"carbohydrate"},{default:t(()=>[e(p,{modelValue:l.form.carbohydrate,"onUpdate:modelValue":a[12]||(a[12]=o=>l.form.carbohydrate=o),type:"number"},{append:t(()=>[n("g")]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:8},{default:t(()=>[e(u,{label:"脂肪",prop:"fat"},{default:t(()=>[e(p,{modelValue:l.form.fat,"onUpdate:modelValue":a[13]||(a[13]=o=>l.form.fat=o),type:"number"},{append:t(()=>[n("g")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"食材清单",prop:"ingredients"},{default:t(()=>[e(p,{type:"textarea",rows:3,modelValue:l.form.ingredients,"onUpdate:modelValue":a[14]||(a[14]=o=>l.form.ingredients=o),placeholder:"每行一个食材，格式：食材名称 用量",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"烹饪步骤",prop:"steps"},{default:t(()=>[e(p,{type:"textarea",rows:4,modelValue:l.form.steps,"onUpdate:modelValue":a[15]||(a[15]=o=>l.form.steps=o),placeholder:"每行一个步骤",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(C,{title:"食谱详情",width:"60%",modelValue:l.detailVisible,"onUpdate:modelValue":a[19]||(a[19]=o=>l.detailVisible=o),"close-on-click-modal":!1},{footer:t(()=>[i("span",je,[e(c,{onClick:a[18]||(a[18]=o=>l.detailVisible=!1)},{default:t(()=>[n("关 闭")]),_:1})])]),default:t(()=>[l.currentRecipe?(_(),y("div",we,[e(h,{gutter:20},{default:t(()=>[e(s,{span:8},{default:t(()=>[e(k,{src:l.currentRecipe.image,style:{width:"100%","border-radius":"8px"}},null,8,["src"])]),_:1}),e(s,{span:16},{default:t(()=>[i("h2",ke,m(l.currentRecipe.name),1),i("p",Ee,m(l.currentRecipe.description),1),e(E),e(h,{gutter:20},{default:t(()=>[e(s,{span:6},{default:t(()=>[i("div",Ce,[i("div",Ue,m(l.currentRecipe.cookingTime),1),Re])]),_:1}),e(s,{span:6},{default:t(()=>[i("div",ze,[i("div",Ne,m(l.currentRecipe.calories),1),Se])]),_:1}),e(s,{span:6},{default:t(()=>[i("div",De,[i("div",Ie,m(l.currentRecipe.protein),1),Fe])]),_:1}),e(s,{span:6},{default:t(()=>[i("div",Te,[i("div",Pe,m(l.currentRecipe.difficulty),1),Be])]),_:1})]),_:1}),e(E),Je,i("div",Oe,[(_(!0),y(U,null,R(l.currentRecipe.ingredients.split(`
`),(o,f)=>(_(),y("div",{key:f,style:{"margin-bottom":"5px"}},[e(j,{type:"success",size:"small"},{default:t(()=>[n(m(f+1),1)]),_:2},1024),i("span",Me,m(o),1)]))),128))]),e(E),Ae,i("div",Ge,[(_(!0),y(U,null,R(l.currentRecipe.steps.split(`
`),(o,f)=>(_(),y("div",{key:f,style:{"margin-bottom":"15px"}},[i("div",qe,[i("div",Le,m(f+1),1),i("div",$e,m(o),1)])]))),128))])]),_:1})]),_:1})])):x("",!0)]),_:1},8,["modelValue"])])}}};export{sl as default};
